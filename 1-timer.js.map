{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate;\n// initialize options for izitoast\nconst optionsiziToast = {\n  messageColor: 'white',\n  backgroundColor: 'red',\n  position: 'topRight',\n  message: 'Please choose a date in the future',\n};\n// initialize options for flatpickr\nconst optionsFlatPickr = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = checkSelectedDate(selectedDates[0]);\n    if (userSelectedDate) {\n      enableStartButton();\n    } else {\n      disableStartButton();\n      showError();\n    }\n  },\n};\nconst dateTimePicker = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('button[data-start]');\nconst day = document.querySelector('span[data-days]');\nconst hour = document.querySelector('span[data-hours]');\nconst minute = document.querySelector('span[data-minutes]');\nconst second = document.querySelector('span[data-seconds]');\n\nconst checkSelectedDate = date => {\n  const parseDate = Date.parse(date);\n  return parseDate - Date.now() > 0 ? parseDate : false;\n};\nconst enableStartButton = () => {\n  startBtn.disabled = false;\n};\nconst disableStartButton = () => {\n  startBtn.disabled = true;\n};\nconst disableInput = () => {\n  dateTimePicker.disabled = true;\n};\nconst enableInput = () => {\n  dateTimePicker.disabled = false;\n};\nconst showError = () => {\n  iziToast.error(optionsiziToast);\n};\nconst convertMs = ms => {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = addLeadingZero(Math.floor(ms / day));\n  // Remaining hours\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n};\nconst addLeadingZero = value => {\n  return String(value).padStart(2, '0');\n};\nconst runTimer = () => {\n  disableStartButton();\n\n  const intervalId = setInterval(() => {\n    const currentDate = Date.now();\n    const deltaTime = userSelectedDate - currentDate;\n\n    if (deltaTime < 0) {\n      clearInterval(intervalId);\n      enableInput();\n    } else {\n      disableInput();\n      const convertDate = convertMs(deltaTime);\n      updateTimer(convertDate);\n    }\n  }, 1000);\n};\n\nconst updateTimer = convertDate => {\n  const { days, hours, minutes, seconds } = convertDate;\n\n  day.textContent = days;\n  hour.textContent = hours;\n  minute.textContent = minutes;\n  second.textContent = seconds;\n};\n\nflatpickr(dateTimePicker, optionsFlatPickr);\nstartBtn.addEventListener('click', runTimer);\n"],"names":["userSelectedDate","optionsiziToast","optionsFlatPickr","selectedDates","checkSelectedDate","enableStartButton","disableStartButton","showError","dateTimePicker","startBtn","day","hour","minute","second","date","parseDate","disableInput","enableInput","iziToast","convertMs","ms","days","addLeadingZero","hours","minutes","seconds","value","runTimer","intervalId","currentDate","deltaTime","convertDate","updateTimer","flatpickr"],"mappings":"iyBAKA,IAAIA,EAEJ,MAAMC,EAAkB,CACtB,aAAc,QACd,gBAAiB,MACjB,SAAU,WACV,QAAS,oCACX,EAEMC,EAAmB,CACvB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBH,EAAmBI,EAAkBD,EAAc,CAAC,CAAC,EACjDH,EACFK,KAEAC,IACAC,IAEH,CACH,EACMC,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAM,SAAS,cAAc,iBAAiB,EAC9CC,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAS,SAAS,cAAc,oBAAoB,EAEpDT,EAAoBU,GAAQ,CAChC,MAAMC,EAAY,KAAK,MAAMD,CAAI,EACjC,OAAOC,EAAY,KAAK,IAAK,EAAG,EAAIA,EAAY,EAClD,EACMV,EAAoB,IAAM,CAC9BI,EAAS,SAAW,EACtB,EACMH,EAAqB,IAAM,CAC/BG,EAAS,SAAW,EACtB,EACMO,EAAe,IAAM,CACzBR,EAAe,SAAW,EAC5B,EACMS,EAAc,IAAM,CACxBT,EAAe,SAAW,EAC5B,EACMD,EAAY,IAAM,CACtBW,EAAS,MAAMjB,CAAe,CAChC,EACMkB,EAAYC,GAAM,CAQtB,MAAMC,EAAOC,EAAe,KAAK,MAAMF,EAAK,KAAG,CAAC,EAE1CG,EAAQD,EAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAEpDI,EAAUF,EAAe,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEK,EAAUH,EACd,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,EACMH,EAAiBI,GACd,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAEhCC,EAAW,IAAM,CACrBrB,IAEA,MAAMsB,EAAa,YAAY,IAAM,CACnC,MAAMC,EAAc,KAAK,MACnBC,EAAY9B,EAAmB6B,EAErC,GAAIC,EAAY,EACd,cAAcF,CAAU,EACxBX,QACK,CACLD,IACA,MAAMe,EAAcZ,EAAUW,CAAS,EACvCE,EAAYD,CAAW,CACxB,CACF,EAAE,GAAI,CACT,EAEMC,EAAcD,GAAe,CACjC,KAAM,CAAE,KAAAV,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKM,EAE1CrB,EAAI,YAAcW,EAClBV,EAAK,YAAcY,EACnBX,EAAO,YAAcY,EACrBX,EAAO,YAAcY,CACvB,EAEAQ,EAAUzB,EAAgBN,CAAgB,EAC1CO,EAAS,iBAAiB,QAASkB,CAAQ"}